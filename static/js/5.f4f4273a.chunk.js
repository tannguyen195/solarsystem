(this.webpackJsonpsolarsystem=this.webpackJsonpsolarsystem||[]).push([[5],{72:function(t,n,e){"use strict";e.r(n);var o=e(13),r=e(12),a=e(5),i=e(1),s=e(2),c=e(3),l=e(4),u=e(19);var d=function(t){Object(c.a)(e,t);var n=Object(l.a)(e);function e(){return Object(i.a)(this,e),n.call(this,{vertexColors:!0,depthWrite:!1,blending:r.AdditiveBlending,uniforms:{uSize:{value:30},uTime:{value:0}},vertexShader:"\n    uniform float uSize;\n    uniform float uTime;\n\n    varying vec3 vColor;\n\n    attribute float aScale;\n    attribute vec3 aRandomness;\n    \n\n    float PI = 3.14159265359;\n    void main() {\n      /**\n       * Position\n       */\n      vec4 modelPosition  = modelMatrix * vec4(position, 1.0);\n\n      // Spin\n      float angle = atan(modelPosition.x, modelPosition.z);\n      float distanceToCenter = length(modelPosition.xz);\n      float angleOffet = (1.0 / distanceToCenter) * uTime * 0.2;\n      angle += angleOffet;\n      modelPosition.x = cos(angle) * distanceToCenter;\n      modelPosition.z = sin(angle) * distanceToCenter;\n      \n      //Randomness\n      modelPosition.xyz += aRandomness;\n \n\n      vec4 viewPosition = viewMatrix * modelPosition;\n      vec4 projectedPosition = projectionMatrix * viewPosition;\n      gl_Position = projectedPosition;\n      /**\n       * Size\n       */\n      gl_PointSize = aScale * uSize;\n      gl_PointSize *= ( 1.0 / - viewPosition.z );\n\n      /**\n       * Color\n       */\n      vColor = color;\n    }\n",fragmentShader:"\n  varying vec3 vColor;\n\n  void main()\n  {\n      // // Disc\n      // float strength = distance(gl_PointCoord, vec2(0.5));\n      // strength = step(0.5, strength);\n      // strength = 1.0 - strength;\n  \n      // // Diffuse point\n      // float strength = distance(gl_PointCoord, vec2(0.5));\n      // strength *= 2.0;\n      // strength = 1.0 - strength;\n  \n      // Light point\n      float strength = distance(gl_PointCoord, vec2(0.5));\n      strength = 1.0 - strength;\n      strength = pow(strength, 10.0);\n  \n      // Final color\n      vec3 color = mix(vec3(0.0), vColor, strength);\n      gl_FragColor = vec4(color, 1.0);\n  }\n  "})}return Object(s.a)(e,[{key:"uTime",get:function(){return this.uniforms.uTime.value},set:function(t){return this.uniforms.uTime.value=t}}]),e}(r.ShaderMaterial);Object(u.b)({GalaxyMaterial:d});var h=e(10);n.default=function(t){var n=t.count,e=void 0===n?2e5:n,i=t.radius,s=void 0===i?5:i,c=t.branches,l=void 0===c?3:c,d=t.random,v=void 0===d?.2:d,f=t.randomnessPower,m=void 0===f?3:f,b=t.insideColor,g=void 0===b?"#ff6030":b,j=t.outsideColor,y=void 0===j?"#1b3984":j,O=t.layers,P=void 0===O?11:O,M=Object(a.useRef)(),p=Object(a.useRef)(),w=Object(a.useMemo)((function(){for(var t=new Float32Array(3*e),n=new Float32Array(3*e),o=new Float32Array(1*e),a=new Float32Array(3*e),i=new r.Color(g),c=new r.Color(y),u=0;u<e;u++){var d=Math.random()*s,h=u%l/l*Math.PI*2;new r.Vector3(Math.cos(h)*d,0,Math.sin(h)*d).toArray(t,3*u);var f=Math.pow(Math.random(),m)*(Math.random()<.5?1:-1)*v*d,b=Math.pow(Math.random(),m)*(Math.random()<.5?1:-1)*v*d,j=Math.pow(Math.random(),m)*(Math.random()<.5?1:-1)*v*d;new r.Vector3(f,b,j).toArray(a,3*u);var O=i.clone();O.lerp(c,d/s),new r.Vector3(O.r,O.g,O.b).toArray(n,3*u),o[u]=Math.random()}return[t,n,o,a]}),[e,s,l,m,g,y,v]),x=Object(o.a)(w,4),C=x[0],S=x[1],z=x[2],A=x[3];return Object(u.c)((function(t,n){M.current.uTime+=n})),Object(h.jsxs)("points",{name:"The Milky Way",layers:P,children:[Object(h.jsxs)("bufferGeometry",{ref:p,children:[Object(h.jsx)("bufferAttribute",{attachObject:["attributes","position"],count:e,array:C,itemSize:3}),Object(h.jsx)("bufferAttribute",{attachObject:["attributes","color"],count:e,array:S,itemSize:3}),Object(h.jsx)("bufferAttribute",{attachObject:["attributes","aScale"],count:e,array:z,itemSize:1}),Object(h.jsx)("bufferAttribute",{attachObject:["attributes","aRandomness"],count:e,array:A,itemSize:3})]}),Object(h.jsx)("galaxyMaterial",{ref:M})]})}}}]);
//# sourceMappingURL=5.f4f4273a.chunk.js.map